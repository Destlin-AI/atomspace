
# Use UseOCaml.cmake, provided by cogutils
INCLUDE(UseOCaml)

ADD_LIBRARY (ocamloc
	CamlWrap.cc
)

SET_TARGET_PROPERTIES(ocamloc PROPERTIES
	PREFIX "dll"
)

TARGET_LINK_LIBRARIES(ocamloc
	atomspace
)

# This sets "Force link: YES" but this doesn't seem to affect anything.
# SET(CMAKE_OCaml_LINKER_FLAGS "-linkall")

ADD_OCAML_LIBRARY(atomese
	SOURCES
		atomese.mli
		atomese.ml
	C_LIBRARIES
		ocamloc
)

INSTALL_OCAML_TARGETS(
	atomese
	DESTINATION "lib${LIB_DIR_SUFFIX}/opencog/ocaml")

INSTALL (TARGETS ocamloc
	DESTINATION "lib${LIB_DIR_SUFFIX}/opencog/ocaml")
